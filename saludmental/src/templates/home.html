{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Inicio - Be Man Be Woman" %}{% endblock %}

{% block content %}
<!-- Hero -->
<section class="hero text-center shadow mb-5">
    {% if user.is_authenticated %}
        <h1 class="display-4 fw-bold">
            {% blocktrans with username=user.username %}
                ¡Bienvenid@, {{ username }}!
            {% endblocktrans %}
        </h1>
        <p class="lead">{% trans "Nos alegra verte de nuevo. Explora historias, podcasts y eventos pensados para ti." %}</p>
    {% else %}
        <h1 class="display-4 fw-bold">{% trans "Bienvenid@ a Be Man Be Woman" %}</h1>
        <p class="lead">{% trans "Un espacio para tu bienestar mental, compartir historias, escuchar podcasts y agendar tu progreso." %}</p>
        <a href="{% url 'register' %}" class="btn btn-light btn-lg mt-3">{% trans "Empieza Ahora" %}</a>
    {% endif %}
</section>

<!-- Historias -->
<section class="mb-5">
    <h2 class="mb-4">{% trans "Historias Destacadas" %}</h2>
    <div class="row g-4">
        {% for historia in historias %}
        <div class="col-md-4 d-flex">
            <div class="card w-100">
                <div class="card-body">
                    <h5 class="card-title">{{ historia.titulo }}</h5>
                    <p class="card-text">{{ historia.contenido|truncatewords:20 }}</p>
                    <p class="text-muted small mb-1">{% trans "Por" %} {{ historia.usuario.username }} - {{ historia.fecha|date:"d M Y" }}</p>
                    <div class="small text-muted">
                        <i class="bi bi-hand-thumbs-up"></i> {{ historia.likes_count|default:0 }}
                        &nbsp;·&nbsp;
                        <i class="bi bi-chat-dots"></i> {{ historia.comentarios_count|default:0 }}
                    </div>
                </div>
                <div class="card-footer bg-transparent border-0">
                    <a href="{% url 'historia_detalle' historia.pk %}" class="btn btn-outline-primary w-100">{% trans "Leer más" %}</a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <p class="text-center text-muted">{% trans "No hay historias publicadas aún." %}</p>
        </div>
        {% endfor %}
    </div>
    <div class="mt-4">
        <a href="{% url 'historias_list' %}" class="btn btn-outline-primary">{% trans "Ver historias" %}</a>
        {% if user.is_authenticated %}
            <a href="{% url 'crear_historia' %}" class="btn btn-primary">{% trans "Escribir historia" %}</a>
        {% endif %}
    </div>
</section>
{% endblock %}
